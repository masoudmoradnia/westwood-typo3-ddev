{namespace wwapi=GG\Wwapi\ViewHelpers}


<f:variable name="firstRef" value="{references.0}" />

<section class="ww-references">
    <div class="container-md">
        <h1 class="ww-references__headline">Aktuelle Referenzen</h1>
    </div>
    <div class="ww-references__container">

        <div class="container-md mb-5">
            <article class="ww-reference ww-reference--featured _row _g-0">
                <aside class="_col-md _order-md-2">
                    <div
                        class="ww-reference__area ww-reference__area--{wwapi:setClassForReferences(refId: firstRef.applications.0.id)}">
                        {wwapi:getfirstletter(word: firstRef.applications.0.title)}
                    </div>
                    <f:variable name="img" value="{wwapi:jsondecoder(jsonstring: firstRef.images)}" />
                    <f:link.page pageUid="38" additionalParams="{cid:firstRef.id}">
                        <img class="ww-reference__image" src="{api_url}api/img{img.0}?w=480" alt="" loading="lazy">
                    </f:link.page>
                </aside>

                <div class="ww-reference__content _col-md _order-md-1">
                    <div
                        class="ww-reference__area ww-reference__area--{wwapi:setClassForReferences(refId: firstRef.applications.0.id)}">
                        {wwapi:getfirstletter(word: firstRef.applications.0.title)}
                    </div>
                    <header class="mt-md-5">
                        <h1 class="mt-md-5">{firstRef.title}</h1>
                        <h2 class="mt-md-1">{firstRef.address}</h2>
                    </header>

                    <h3 class="ww-reference__teaser mt-md-5">{firstRef.subtitle}</h3>
                    <f:format.crop maxCharacters="450">
                        <f:format.raw>{firstRef.description}</f:format.raw>
                    </f:format.crop>

                    <footer class="mt-5">
                        <f:link.page pageUid="38" additionalParams="{cid:firstRef.id}"
                            class="ww-button ww-button--secondary ww-button--arrow">
                            weiterlesen
                        </f:link.page>
                    </footer>
                </div>

            </article>
        </div>

        <div id="ww-references-slider" class="container-md">
            <agile :options="myOptions">
                <f:for each="{references}" as="reference" iteration="i">
                    <f:if condition="{i.index}>0 && {i.index}<11">
                        <article class="ww-reference" data-prio="{reference.prio}">
                            <div>
                                <aside>
                                    <div class="ww-reference__area ww-reference__area--{wwapi:setClassForReferences(refId: reference.applications.0.id)}">
                                        {wwapi:getfirstletter(word: reference.applications.0.title)}
                                    </div>
                                    <f:variable name="img" value="{wwapi:jsondecoder(jsonstring: reference.images)}" />
                                    <f:link.page pageUid="38" additionalParams="{cid:reference.id}">
                                        <img class="ww-reference__image" src="{api_url}api/img{img.0}?w=480" alt="" loading="lazy">
                                    </f:link.page>
                                </aside>
                            
                                <header>
                                    <div class="ww-reference__area ww-reference__area--{wwapi:setClassForReferences(refId: reference.applications.0.id)}">
                                        {reference.applications.0.title}
                                    </div>
                                    <h1>{reference.title}</h1>
                                    <h2>{reference.address}</h2>
                                </header>
                            
                                <footer class="mt-auto mb-0">
                                    <f:link.page pageUid="38" additionalParams="{cid:reference.id}" class="ww-button ww-button--secondary ww-button--arrow">
                                        weiterlesen
                                    </f:link.page>
                                </footer>
                            </div>
                        </article>
                    </f:if>
                </f:for>
                <template slot="prevButton">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg>
                </template>
                <template slot="nextButton">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg>
                </template>
            </agile>
        </div>

        <div class="container-md py-2">
            <f:link.page pageUid="3" class="ww-button ww-button--secondary ww-button--full my-4">
                Alle Referenzen
            </f:link.page>
        </div>

    </div>
</section>